<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSR聲紋AI Demo</title>
    <link rel="icon" type="image/x-icon" href="img/NB_logo.ico">

    <meta property="og:title" content="CSR聲紋AI Demo">
    <!-- <meta property="og:description" content="A brief description of your page"> -->
    <meta property="og:image" content="img/fb_cover.png">
    <meta property="og:url" content="">
    <meta property="og:type" content="website">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">
    
    <noscript>
        <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=750960875270921&ev=PageView&noscript=1"/>
    </noscript>
</head>
<body>  
    <div class="container">
        <div class="row mt-0">
            <div id="app" class="mx-0 px-0">
                <div id="view-1" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box mt-5 pt-3">
                                <span class="my-5" style="font-size: smaller;">器捐病主中心Ｘ陽獅集團</span>
                                <h1 class="mt-5">為愛獻聲</h1>
                                <span style="font-size: 1.2em; letter-spacing: 5px;">讓AI替你說愛</span>
                            </div>
                            <img class="" id="mic-image" src="img/mic.svg" alt="">
                            <footer class="fixed-bottom mb-3">
                                <div class="container-fluid">
                                    <div class="row">
                                        <button id="start-btn" class="mt-1">開始</button>
                                        <p class="disclaimer mt-2">進入頁面即代表同意 <button class="btn disclaimer p-0" id="disclaimer_link_" style="animation: fadeIn 1s ease-in forwards; text-decoration: underline;">相關條款聲明</button></p>
                                    </div>
                                </div>
                            </footer>
                        </div>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-2" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box message-box">
                                <div class="text_content">
                                    <p class="conversation_content mb-5">Hi你好嗎！</p>
                                    <p class="conversation_content mb-1">你有多久沒有和最在乎的人</p>
                                    <p class="conversation_content">好好說話...</p>
                                </div>
                            </div>
                            <img class="" id="mic-image-2" src="img/mic.svg" alt="">
                        </div>
                        <!-- <button id="q1-btn" class="mt-5 mb-3">next</button> -->
                    </div>
                    <div class="ball-3"></div>
                </div>
                <div id="view-3" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box message-box">
                                <div class="text_content">
                                    <p class="mb-1 mt-3" style="font-size: 1.2em;">可能因為害羞、忙碌或其他原因</p>
                                    <p class="mb-5" style="font-size: 1.2em;">錯過<span style="color: white;">表達愛</span>的機會</p>
                                    <p class="mb-1" style="font-size: 1.2em;">現在，透過<span style="color: white;">聲紋擬音</span></p>
                                    <p class="" style="font-size: 1.2em;">把愛說出口沒有那麼難</p>
                                </div>
                            </div>
                        </div>
                        <!-- <button id="q2-btn" class="mt-5 mb-3">next</button> -->
                    </div>
                    <div class="ball-4"></div>
                    <div class="ball-5"></div>
                </div>
                <div id="view-4" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box message-box">
                                <div class="text_content">
                                    <p class="mb-1 mt-5" style="font-size: 1.5em;">留下你想說的話</p>
                                    <p class="" style="font-size: 1.5em;">讓生命故事美好延傳</p>
                                </div>
                            </div>
                        </div>
                        <!-- <button id="q3-btn" class="mt-5 mb-3">next</button> -->
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-5" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 36vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">請告訴我</p>
                                    <p class="" style="font-size: 1.2em;">你想說話的對象</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container mt-3 mb-3">
                        <div class="row justify-content-center">
                            <div class="col-12 col-md-6">
                                <div class="custom-dropdown">
                                    <select id="question_1">
                                        <option value="">- 對象 -</option>
                                        <option value="子女">子女</option>
                                        <option value="朋友">朋友</option>
                                        <option value="情人">情人</option>
                                        <option value="家人">家人</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <form action="">
                                    <input class="" type="text" name="question_2" id="question_2" placeholder="你都如何稱呼他/她？">
                                </form>
                            </div>
                        </div>
                    </div>
                    <footer class="fixed-bottom mb-3">
                        <div class="container-fluid">
                            <div class="row">
                                <button id="q4-btn" class="next-btn mt-5 mb-3" disabled>選好了&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;></button>
                            </div>
                        </div>
                    </footer>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-6" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 28vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">難得鼓起勇氣</p>
                                    <p class="" style="font-size: 1.2em;">你想對<span id="dv_1">家人</span>說些什麼呢？</p>
                                    <p class="boxed-text" style="font-size: 0.8em;">請選擇至多2句想講的話</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container mt-3 mb-3 px-5">
                        <div class="row justify-content-center">
                            <div class="col-12">
                                <div class="custom-checkbox">
                                    <input type="checkbox" class="question_3" id="question_3_1" value="我花太少時間陪你們">
                                    <label for="question_3_1" id="q3_1_lable">我花太少時間陪你們...</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="custom-checkbox">
                                    <input type="checkbox" class="question_3" id="question_3_2" value="謝謝你為家庭付出的一切">
                                    <label for="question_3_2" id="q3_2_lable">謝謝你為家庭付出的一切...</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="custom-checkbox">
                                    <input type="checkbox" class="question_3" id="question_3_3" value="謝謝你總是無條件支持我">
                                    <label for="question_3_3" id="q3_3_lable">謝謝你總是無條件支持我...</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="custom-checkbox">
                                    <input type="checkbox" class="question_3" id="question_3_4" value="我真的好愛你們">
                                    <label for="question_3_4" id="q3_4_lable">我真的好愛你們...</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <footer class="fixed-bottom mb-3">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-6">
                                    <button id="q5-btn-back" class="next-btn next-btn-6 mt-5 mb-3">返回></button>
                                </div>
                                <div class="col-6">
                                    <button id="q5-btn" class="next-btn next-btn-6 mt-5 mb-3" disabled>下一步&nbsp;&nbsp;></button>
                                </div>
                            </div>
                        </div>
                    </footer>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-7" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 28vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">再來...</p>
                                    <p class="" style="font-size: 1.2em;">讓我們增加一些情感濃度</p>
                                    <p class="boxed-text" style="font-size: 0.8em;">請選擇 1 個想表達的情緒</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container mt-3 mb-3 px-5">
                        <div class="row justify-content-center">
                            <div class="col-6 col-md-6">
                                <div class="custom-checkbox2">
                                    <input type="checkbox" class="question_4" id="question_4_1" value="真摯">
                                    <label for="question_4_1" id="q4_1_lable"><span>真摯</span></label>
                                </div>
                            </div>
                            <div class="col-6 col-md-6">
                                <div class="custom-checkbox2">
                                    <input type="checkbox" class="question_4" id="question_4_2" value="感激">
                                    <label for="question_4_2" id="q4_2_lable"><span>感激</span></label>
                                </div>
                            </div>
                            <div class="col-6 col-md-6">
                                <div class="custom-checkbox2">
                                    <input type="checkbox" class="question_4" id="question_4_3" value="溫暖">
                                    <label for="question_4_3" id="q4_3_lable"><span>溫暖</span></label>
                                </div>
                            </div>
                            <div class="col-6 col-md-6">
                                <div class="custom-checkbox2">
                                    <input type="checkbox" class="question_4" id="question_4_4" value="深情">
                                    <label for="question_4_4" id="q4_4_lable"><span>深情</span></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <footer class="fixed-bottom mb-3">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-6">
                                    <button id="q6-btn-back" class="next-btn next-btn-6 mt-5 mb-3">返回></button>
                                </div>
                                <div class="col-6">
                                    <button id="q6-btn" class="next-btn next-btn-6 mt-5 mb-3" disabled>下一步&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;></button>
                                </div>
                            </div>
                        </div>
                    </footer>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-8" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 28vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">想多了解你</p>
                                    <p class="" style="font-size: 1.2em;">讓言語更貼近</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container mt-3 mb-5">
                        <div class="row justify-content-center">
                            <div class="col-12 col-md-6">
                                <form action="">
                                    <input class="" type="text" name="question_5" id="question_5" placeholder="如何稱呼你？">
                                </form>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="custom-dropdown">
                                    <select id="question_6">
                                        <option value="">- 年齡 -</option>
                                        <option value="18歲以下">18歲以下</option>
                                        <option value="18-30歲">18-30歲</option>
                                        <option value="31-44歲">31-44歲</option>
                                        <option value="44-64歲">44-64歲</option>
                                        <option value="65歲以上">65歲以上</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="custom-dropdown">
                                    <select id="question_7">
                                        <option value="">- 性別 -</option>
                                        <option value="生理男性">生理男性</option>
                                        <option value="生理女性">生理女性</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    <footer class="fixed-bottom mb-3">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-6">
                                    <button id="q7-btn-back" class="next-btn next-btn-6 mt-5 mb-3">返回></button>
                                </div>
                                <div class="col-6">
                                    <button id="q7-btn" class="next-btn next-btn-6 mt-5 mb-3" disabled>下一步&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;></button>
                                </div>
                            </div>
                        </div>
                    </footer>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-9" class="view hidden">
                    <div class="container-fluid mx-0 px-0">
                        <div class="row" style="height: 60vh;">
                            <div class="title-box mt-5">
                                <div class="" style="margin-top: 76%;">
                                    <img src="img/context_generating.gif" style="width: 100%;" alt="">
                                    <p class="mb-1 mt-5" style="font-size: 1em;">情感醞釀中，請稍候...</p>
                                </div>
                            </div>
                        </div>
                        <!-- <button id="q8-btn" class="mt-5 mb-3">next</button> -->
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-10" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 80vh;">
                            <div class="title-box message-box">
                                <!-- <p id="result_content" style="font-size: small;">aa，你對我們家庭的愛與付出讓我每天都感到幸福，一路上面對的各種困難，你用你的雙手為我們搭建起最堅固的家。無論我多麼困頓，你總是在我背後無條件支持我，每次看到你堅定的眼神，就有了繼續前進的力量。我希望你知道，你對我來說有多麼重要。再一次對你說：謝謝你，我的朋友aa，謝謝你為家庭付出的一切，謝謝你無條件地支持我。</p> -->
                                <div class="text_content">
                                    <p class="conversation_content mb-5">你願意親身錄下聲音</p>
                                    <p class="conversation_content mb-1">讓我為你的聲音採樣?</p>
                                </div>
                            </div>
                            <img class="" id="mic-image-3" src="img/mic.svg" alt="">
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <button id="q9-1-btn" class="next-btn mt-3" style="width: 80%;">我同意</button>
                            </div>
                            <div class="col-6">
                                <button id="q9-2-btn" class="next-btn mt-3" style="width: 80%;">AI幫幫我</button>
                            </div>
                        </div>
                    </div>
                    <div class="ball-3"></div>
                </div>
                <div id="view-11" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 16vh;">
                            <div class="title-box">
                                <div class="">
                                    <p class="mt-3" style="font-size: 1.4em;">[ 愛的宣言 ]</p>
                                    <p class="boxed-text" style="font-size: 0.8em; width: 80%;">請按下按鈕錄音，開始念誦以下文字</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-12 record_message_box">
                                <p class="mb-1">這個匆忙的時代，我們經常錯失</p>
                                <p class="mb-5">表達內心情感的機會。</p>
                                
                                <p class="mb-1">現在，我願透過留下聲紋，</p>
                                <p class="mb-1">讓愛超越時空的限制，</p>
                                <p class="mb-5">賦予所愛之人力量和安慰。</p>

                                <p class="mb-1">我承諾繼續分享愛，留存愛，</p>
                                <p class="mb-1">讓這份真摯的情感，</p>
                                <p class="mb-1">以另一種方式</p>
                                <p class="mb-5">在時間的消逝中永存。</p>
                            </div>
                        </div>
                        <button id="recordButton" class="record_icon"><img src="img/Record_Icon.svg" alt=""></button>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-12" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 16vh;">
                            <div class="title-box mt-3">
                                <div class="">
                                    <p class="mt-3" style="font-size: 1.4em;">[ 愛的宣言 ]</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-12 record_message_box">
                                <p class="mb-1">這個匆忙的時代，我們經常錯失</p>
                                <p class="mb-5">表達內心情感的機會。</p>
                                
                                <p class="mb-1">現在，我願透過留下聲紋，</p>
                                <p class="mb-1">讓愛超越時空的限制，</p>
                                <p class="mb-5">賦予所愛之人力量和安慰。</p>

                                <p class="mb-1">我承諾繼續分享愛，留存愛，</p>
                                <p class="mb-1">讓這份真摯的情感，</p>
                                <p class="mb-1">以另一種方式</p>
                                <p class="mb-5">在時間的消逝中永存。</p>
                            </div>
                        </div>
                        <div class="row mt-5">
                            <div class="col-6">
                                <button id="q11-btn-back" class="next-btn mt-3" style="width: 80%;">重新採樣</button>
                            </div>
                            <div class="col-6">
                                <button id="q11-btn" class="next-btn mt-3" style="width: 80%;">完成</button>
                            </div>
                        </div>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-13" class="view hidden">
                    <div class="container-fluid mx-0 px-0">
                        <div class="row" style="height: 60vh;">
                            <div class="title-box mt-5">
                                <div class="" style="margin-top: 40%; position: relative;">
                                    <img src="img/sound_wave_circle.gif" style="width: 90%; position: absolute; top: 0; left: 5%;" alt="">
                                    <p class="" style="font-size: 1em;   position: absolute;
                                    left: 0;
                                    right: 0;
                                    top: 170px;
                                    bottom: 0;
                                    margin: auto;">愛在發聲中...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                    <footer class="fixed-bottom">
                        <!-- <button id="q12-btn" class="mt-5 mb-3">next</button> -->
                    </footer>
                </div>
                <div id="view-14" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 24vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">讓我們來聽聽</p>
                                    <p class="" style="font-size: 1.2em;">屬於你 愛的發聲</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container-fluid mx-0 px-5">
                        <div class="row" style="height: 48vh;">
                            <div class="title-box message-box" style="margin-top: 0;">
                                <img src="img/result_sound_wave_animation.svg" alt="" style="width: 100%; height: auto; position: absolute; top: 50%; transform: translateY(-50%);">
                                <button id="playGeneratedAudioButton" style="width: 20%; height: auto; position: absolute; top: 50%; transform: translateY(-50%); background-color: transparent; border: none; cursor: pointer; z-index: 1000;">
                                    <img src="img/result_play_icon.svg" alt="">
                                </button>
                                <audio id="audio" src="sound/under18 Male-1.m4a"></audio>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <button id="inviteButton" class="" style="width: 100%; height: 100%;">邀請朋友<br>一起玩</button>
                            </div>
                            <div class="col-6">
                                <button id="shareButton" class="" style="width: 100%; height: 100%;">分享給<br>他/她</button>
                            </div>
                            <div class="col-12 mt-3">
                                <button id="q13-btn" class=" mt-3 invisible_btn"><img src="img/result_watch_more.svg" style="width: 12%; height: auto;" alt=""></button>
                            </div>
                        </div>
                    </div>
                    <div class="ball-1"></div>
                </div>
                <div id="view-15" class="view hidden">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12 mt-3">
                                <button id="q14-btn" class="mt-1 invisible_btn"><img src="img/result_return.svg" style="width: 8%; height: auto;" alt=""></button>
                            </div>
                        </div>
                        <div class="row" style="height: 12vh;">
                            <div class="title-box">
                                <div class="">
                                    <p class="mt-0 mb-0" style="font-size: 1.4em;"><span style="font-size: 1.6em; color: white;">愛</span>的心聲已傳達</p>
                                    <p class="mt-0 mb-0" style="font-size: 1em;">還有另外一種方式，「再現生機」</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-12 record_message_box">
                                <img src="img/soundcard.svg" class="mb-3" style="width: 100%;" alt="">
                                <p class="mb-1" style="color: #3B3B3B;">錄下同意器官捐贈的任何心聲</p>
                                <p class="mb-1" style="color: #3B3B3B;">讓你的愛和理想</p>
                                <p class="mb-3" style="color: #3B3B3B;">能被在乎的人聽見、留存記憶中</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <!-- <button id="" class="more-btn mt-2 py-2">了解器捐聲紋卡</button> -->
                                <a class="more-btn button mt-2" target="_blank" href="https://linktr.ee/speakwithloveai">了解器捐聲紋卡</a>
                            </div>
                            <div class="col-12">
                                <button id="back_btn" class="more-btn mt-1">重新 為愛發聲</button>
                            </div>
                        </div>
                    </div>
                    <footer class="fixed-bottom">
                        <a target="_blank" href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=為愛獻聲，讓愛留存&dates=20240309T120000Z/202400327T130000Z&details=為愛獻聲，讓愛留存&location=taipei">
                            <img src="img/activity.svg" alt="">
                        </a>
                    </footer>
                    <div class="ball-3"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script>
        // initpage
        const initView = document.getElementById('view-10')
        initView.classList.remove('hidden');

        const imageUrl = 'https://www.nb9060futureplan.com/';
        const shareText = encodeURIComponent("Check out this awesome image!");
        const shareUrl = encodeURIComponent(window.location.href);

        const downloadSHare = document.querySelector(".download-share");

        const startBtn = document.getElementById('start-btn');
        const startBuildingBtn = document.getElementById('start-building-btn');

        const q4Btn = document.getElementById('q4-btn');
        const q5Btn = document.getElementById('q5-btn');
        const q6Btn = document.getElementById('q6-btn');
        const q7Btn = document.getElementById('q7-btn');
        const q5BtnBack = document.getElementById('q5-btn-back');
        const q6BtnBack = document.getElementById('q6-btn-back');
        const q7BtnBack = document.getElementById('q7-btn-back');
        // const q8Btn = document.getElementById('q8-btn');
        const q9_1Btn = document.getElementById('q9-1-btn');
        const q9_2Btn = document.getElementById('q9-2-btn');
        // const q10Btn = document.getElementById('q10-btn');
        const q11Btn = document.getElementById('q11-btn');
        const q11BtnBack = document.getElementById('q11-btn-back');
        // const q12Btn = document.getElementById('q12-btn');
        const q13Btn = document.getElementById('q13-btn');
        const q14Btn = document.getElementById('q14-btn');

        const views = document.getElementsByClassName('view');
        const result = document.getElementById('result');

        const btnHome = document.getElementById('btn_home');

        // const disclaimerClose = document.getElementById('disclaimer_close');
        // const disclaimerLink = document.getElementById('disclaimer_link');

        const nbLogoR = document.getElementById('nb-logo-r');

        var q1Btns = document.getElementsByClassName("q1-btn");
        var q2Btns = document.getElementsByClassName("q2-btn");
        var q3Btns = document.getElementsByClassName("q3-btn");
        var q4Btns = document.getElementsByClassName("q4-btn");
        
        const question1 = document.getElementById("question_1");
        const dv1 = document.getElementById("dv_1");
        let question1_value = "";
        const question2 = document.getElementById("question_2");
        let question2_value = "";
        const question3s = document.querySelectorAll('.question_3');
        let selectedCount = 0;
        let question3_value = "";
        const question3_1_input = document.getElementById("question_3_1");
        const question3_1_label = document.getElementById("q3_1_lable");
        const question3_2_input = document.getElementById("question_3_2");
        const question3_2_label = document.getElementById("q3_2_lable");
        const question3_3_input = document.getElementById("question_3_3");
        const question3_3_label = document.getElementById("q3_3_lable");
        const question3_4_input = document.getElementById("question_3_4");
        const question3_4_label = document.getElementById("q3_4_lable");

        const question4s = document.querySelectorAll('.question_4');
        let selectedCount4 = 0;
        let question4_value = "";
        const question5 = document.getElementById("question_5");
        let question5_value = "";
        const question6 = document.getElementById("question_6");
        let question6_value = "";
        const question7 = document.getElementById("question_7");
        let question7_value = "";

        function checkQuestionValue() {
            if (question1_value !== "" && question2_value !== "") {
                q4Btn.disabled = false;
            } else {
                q4Btn.disabled = true;
            }
            if (question3_value !== "") {
                q5Btn.disabled = false;
            } else {
                q5Btn.disabled = true;
            }
            if (question4_value !== "") {
                q6Btn.disabled = false;
            } else {
                q6Btn.disabled = true;
            }
            if (question7_value !== "" && question6_value !== "" && question6_value !== "") {
                q7Btn.disabled = false;
            } else {
                q7Btn.disabled = true;
            }
        }

        question1.addEventListener("change", function () {
            question1_value = question1.value;
            dv1.textContent = question1_value;
            checkQuestionValue();
            if (question1_value === '子女') {
                question3_1_input.value = "我很為你驕傲";
                question3_1_label.textContent = "我很為你驕傲";
                question3_2_input.value = "家永遠是妳的避風港";
                question3_2_label.textContent = "家永遠是妳的避風港";
                question3_3_input.value = "你是我最愛的寶貝";
                question3_3_label.textContent = "你是我最愛的寶貝";
                question3_4_input.value = "有空多打電話回家";
                question3_4_label.textContent = "有空多打電話回家..";
            } else if (question1_value === '朋友') {
                question3_1_input.value = "想起過去一起度過的時光";
                question3_1_label.textContent = "想起過去一起度過的時光...";
                question3_2_input.value = "找時間一起出去玩吧";
                question3_2_label.textContent = "找時間一起出去玩吧";
                question3_3_input.value = "好久不見，我很懷念";
                question3_3_label.textContent = "好久不見，我很懷念...";
                question3_4_input.value = "謝謝你總是給我鼓勵";
                question3_4_label.textContent = "謝謝你總是給我鼓勵";
            } else if (question1_value === '情人') {
                question3_1_input.value = "謝謝有你在";
                question3_1_label.textContent = "謝謝有你在...";
                question3_2_input.value = "雖然偶爾有爭吵";
                question3_2_label.textContent = "雖然偶爾有爭吵";
                question3_3_input.value = "我真的好愛你";
                question3_3_label.textContent = "我真的好愛你..";
                question3_4_input.value = "我很喜歡和你在一起";
                question3_4_label.textContent = "我很喜歡和你在一起...";
            } else if (question1_value === '家人') {
                question3_1_input.value = "我花太少時間陪你們";
                question3_1_label.textContent = "我花太少時間陪你們...";
                question3_2_input.value = "謝謝你為家庭付出的一切";
                question3_2_label.textContent = "謝謝你為家庭付出的一切...";
                question3_3_input.value = "謝謝你總是無條件支持我";
                question3_3_label.textContent = "謝謝你總是無條件支持我...";
                question3_4_input.value = "我真的好愛你們";
                question3_4_label.textContent = "我真的好愛你們...";
            } else {
                question3_1_input.value = "我花太少時間陪你們";
                question3_1_label.textContent = "我花太少時間陪你們...";
                question3_2_input.value = "謝謝你為家庭付出的一切";
                question3_2_label.textContent = "謝謝你為家庭付出的一切...";
                question3_3_input.value = "謝謝你總是無條件支持我";
                question3_3_label.textContent = "謝謝你總是無條件支持我...";
                question3_4_input.value = "我真的好愛你們";
                question3_4_label.textContent = "我真的好愛你們...";
            }
        });
        
        question2.addEventListener("input", function() {
            question2_value = question2.value;
            checkQuestionValue();
        });
        question3s.forEach(question3 => {
            question3.addEventListener("change", function() {
                if (this.checked) {
                    if (selectedCount >= 2) {
                        this.checked = false;
                    } else {
                        selectedCount++;

                        if (this.checked) {
                            this.classList.add("selected");
                            question3_value = Array.from(question3s)
                                .filter(checkbox => checkbox.checked)
                                .map(checkbox => checkbox.value);
                        } else {
                            question3_value = "";
                        }
                    }
                } else {
                    selectedCount--;
                    this.classList.remove("selected");
                }
                checkQuestionValue();
            });
        });
        question4s.forEach(question4 => {
            question4.addEventListener("change", function() {
                if (this.checked) {
                    if (selectedCount4 >= 1) {
                        this.checked = false;
                    } else {
                        selectedCount4++;

                        if (this.checked) {
                            this.classList.add("selected");
                            question4_value = this.value
                        } else {
                            question4_value = "";
                        }
                    }
                } else {
                    selectedCount4--;
                    this.classList.remove("selected");
                }
                checkQuestionValue();
            });
        });
        question5.addEventListener("input", function() {
            question5_value = question5.value;
            checkQuestionValue();
        });
        question6.addEventListener("input", function() {
            question6_value = question6.value;
            checkQuestionValue();
        });
        question7.addEventListener("input", function() {
            question7_value = question7.value;
            checkQuestionValue();
        });

        const getData = async (url, data) => {
            try {
                const headers = new Headers({
                    'Content-Type': 'application/json',
                });

                const requestOptions = {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify(data),
                };
                const response = await fetch(url, requestOptions);

                if (!response.ok) {
                throw new Error(`HTTP error: ${response.status}`);
                }

                const jsonResponse = await response.json();
                return jsonResponse;

            } catch (error) {
                console.error('Error sending GET request:', error);
            }
        };

        const inputs = document.getElementsByClassName('form-check-input');

        startBtn.addEventListener('click', () => {
            navigateToView(1);
            setTimeout(function() {
                navigateToView(2);
            }, 3000);
            setTimeout(function() {
                navigateToView(3);
            }, 6000);
            setTimeout(function() {
                navigateToView(4);
            }, 9000);
        });

        q4Btn.addEventListener('click', () => {
            navigateToView(5);
        });
        q5Btn.addEventListener('click', () => {
            navigateToView(6);
        });
        q6Btn.addEventListener('click', () => {
            navigateToView(7);
        });
        q7Btn.addEventListener('click', () => {
            handleResults();
            navigateToView(8);
            setTimeout(function() {
                navigateToView(9);
            }, 20000);
        });

        q5BtnBack.addEventListener('click', () => {
            navigateToView(4);
        });
        q6BtnBack.addEventListener('click', () => {
            navigateToView(5);
        });
        q7BtnBack.addEventListener('click', () => {
            navigateToView(6);
        });

        // q8Btn.addEventListener('click', () => {
        //     navigateToView(9);
        // });
        q9_1Btn.addEventListener('click', () => {
            navigateToView(10);
        });
        q9_2Btn.addEventListener('click', () => {
            navigateToView(12);
            setTimeout(function() {
                navigateToView(13);
            }, 20000);
        });
        // q10Btn.addEventListener('click', () => {
        //     navigateToView(11);
        // });
        q11Btn.addEventListener('click', () => {
            navigateToView(12);
            setTimeout(function() {
                navigateToView(13);
            }, 20000);
        });
        q11BtnBack.addEventListener('click', () => {
            navigateToView(10);
        });
        // q12Btn.addEventListener('click', () => {
        //     navigateToView(13);
        // });
        q13Btn.addEventListener('click', () => {
            navigateToView(14);
        });
        q14Btn.addEventListener('click', () => {
            navigateToView(13);
        });

        // disclaimerClose.addEventListener('click', () => {
        //     navigateToView(0);
        // });
        // disclaimerLink.addEventListener('click', () => {
        //     navigateToView(10);
        // });

        // Add a click event to each element
		for (var i = 0; i < q1Btns.length; i++) {q1Btns[i].addEventListener('click', () => {navigateToView(3);});}
        for (var i = 0; i < q2Btns.length; i++) {q2Btns[i].addEventListener('click', () => {navigateToView(4);});}
        for (var i = 0; i < q3Btns.length; i++) {q3Btns[i].addEventListener('click', () => {navigateToView(5);});}
        for (var i = 0; i < q4Btns.length; i++) {
            q4Btns[i].addEventListener('click', () => {
                navigateToView(6); // Show the wait view
                setTimeout(() => {
                    handleResults();
                }, 2000),
                setTimeout(() => {
                    if (window.matchMedia('(min-width: 768px)').matches) {
                        
                    } else {
                        document.getElementById('navbar').classList.add('hidden');
                        swipeBackground.style.backgroundImage = 'url('+resultImage.src+')';
                        navigateToView(11);
                        setTimeout(() => {
                            swipeBackground.style.backgroundPosition = '100% center';
                        }, 100);
                        // setTimeout(() => {
                        //     // swipeBackground.style.backgroundPosition = '100% center';
                        //     // document.body.style.backgroundImage = originalBackgroundImage;
                        // }, 1700);
                    }
                }, 16500);
                setTimeout(() => {
                    displayResults();
                }, 18500);
                setTimeout(() => {
                    navigateToView(7); // Show the result view after 5 seconds
                    document.getElementById('navbar').classList.remove('hidden');
                    swipeBackground.style.backgroundPosition = '0% center';
                    nbLogoR.classList.remove('hidden');
                }, 19000);
            });
        }

        function navigateToView(viewIndex) {
            for (let i = 0; i < views.length; i++) {
                if (i === viewIndex) {
                    views[i].classList.remove('hidden');
                    // views[i].style.opacity = '1';
                } else {
                    views[i].classList.add('hidden');
                    // views[i].style.opacity = '0';
                }
            }
        }
        async function handleResults() {
            console.log('handleResults')
            var formData = {
                age: question6_value,
                gender: question7_value,
                relation: question1_value,
                name: question2_value,
                element: question3_value.join(", "),
                emotion: question4_value,
            };
            console.log(formData)

            // Send a GET request with the answers as query parameters
            const url = `https://chatgptdemo.williamhsu.com.tw/csr_demo_page/run/`;
            
            const responseData = await getData(url, formData);

            if (responseData) {
                console.log(responseData)
                // document.getElementById("result_content").textContent = JSON.stringify(responseData.content, null, 2);
            }
        }

        const playGeneratedAudioButton = document.getElementById("playGeneratedAudioButton");
        
        playGeneratedAudioButton.addEventListener("click", () => {
            console.log('playGeneratedAudio')
            const audio = document.getElementById("audio");
    
            if (audio.paused) {
                audio.play();
            } else {
                audio.pause();
                audio.currentTime = 0;
            }
        });
        document.getElementById("inviteButton").addEventListener("click", function() {
            console.log('invite')
            if (navigator.share) {
                navigator.share({
                    title: '一起為愛獻聲，把愛說出口！',
                    text: '一起為愛獻聲，把愛說出口！',
                    url: window.location.href
                }).then(function() {
                    console.log('Shared successfully');
                }).catch(function(error) {
                    console.error('Error sharing:', error);
                });
            } else {
                alert('Sharing is not supported on this browser. You can manually copy the URL.');
            }
        });
        document.getElementById("back_btn").addEventListener("click", function() {
            question1.value = "";
            question1_value = "";
            question2.value = "";
            question2_value = "";
            question3_value = "";
            question4_value = "";
            question5.value = "";
            question5_value = "";
            question6.value = "";
            question6_value = "";
            question7.value = "";
            question7_value = "";
            checkQuestionValue();
            navigateToView(4);
        });

        let mediaRecorder;
        let audioChunks = [];

        document.getElementById('recordButton').addEventListener('click', () => {
            if (mediaRecorder && mediaRecorder.state === "recording") {
                mediaRecorder.stop();
                navigateToView(11)
                
            } else {
                navigator.mediaDevices.getUserMedia({ audio: true, video: false })
                    .then(stream => {
                        mediaRecorder = new MediaRecorder(stream);
                        audioChunks = [];

                        mediaRecorder.ondataavailable = event => {
                            audioChunks.push(event.data);
                        };

                        mediaRecorder.start();
                        // document.getElementById('recordButton').textContent = 'Stop Recording';
                        // document.getElementById('downloadButton').disabled = true;
                    })
                    .catch(error => console.error("Permission denied or error:", error));
            }
        });
        document.getElementById('shareButton').addEventListener('click', () => {
            const audioBlob = new Blob(audioChunks, { type: 'audio/mp4' });
            saveAs(audioBlob, "recording.mp4");
        });
    </script>
</body>
</html>
