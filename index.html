<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSR聲紋AI Demo</title>
    <link rel="icon" type="image/x-icon" href="img/NB_logo.ico">

    <meta property="og:title" content="CSR聲紋AI Demo">
    <!-- <meta property="og:description" content="A brief description of your page"> -->
    <meta property="og:image" content="img/fb_cover.png">
    <meta property="og:url" content="">
    <meta property="og:type" content="website">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="css/style.css">
    
    <noscript>
        <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=750960875270921&ev=PageView&noscript=1"/>
    </noscript>
</head>
<body>  
    <div class="container">
        <div class="row mt-0">
            <div id="app" class="mx-0 px-0">
                <div id="view-1" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box mt-5 pt-3">
                                <span class="my-5" style="font-size: smaller;">器捐病主中心Ｘ陽獅集團</span>
                                <h1 class="mt-5">為愛獻聲</h1>
                                <span style="font-size: 1.2em; letter-spacing: 5px;">讓AI替你說愛</span>
                            </div>
                            <img class="" id="mic-image" src="img/mic.svg" alt="">
                            <div class="col bot-group align-self-end">
                                <button id="start-btn" class="mt-1 mb-3">開始</button>
                                <p class="disclaimer mt-2" style="">進入頁面即同意<button class="btn disclaimer p-0" id="disclaimer_link_" style="animation: fadeIn 1s ease-in forwards; text-decoration: underline;">相關條款聲明</button></p>
                            </div>
                        </div>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-2" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box message-box">
                                <div class="text_content">
                                    <p class="conversation_content mb-5">Hi你好嗎！</p>
                                    <p class="conversation_content mb-1">你有多久沒有和最在乎的人</p>
                                    <p class="conversation_content">好好說話...</p>
                                </div>
                            </div>
                            <img class="" id="mic-image-2" src="img/mic.svg" alt="">
                        </div>
                        <button id="q1-btn" class="mt-5 mb-3">next</button>
                    </div>
                    <div class="ball-3"></div>
                </div>
                <div id="view-3" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box message-box">
                                <div class="text_content">
                                    <p class="mb-1 mt-3" style="font-size: 1.2em;">可能因為害羞、忙碌或其他原因</p>
                                    <p class="mb-5" style="font-size: 1.2em;">錯過<span style="color: #F68A26;">表達愛</span>的機會</p>
                                    <p class="mb-1" style="font-size: 1.2em;">現在，透過<span style="color: #F68A26;">聲紋擬音</span></p>
                                    <p class="" style="font-size: 1.2em;">把愛說出口沒有那麼難</p>
                                </div>
                            </div>
                        </div>
                        <button id="q2-btn" class="mt-5 mb-3">next</button>
                    </div>
                    <div class="ball-4"></div>
                    <div class="ball-5"></div>
                </div>
                <div id="view-4" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box message-box">
                                <div class="text_content">
                                    <p class="mb-1 mt-5" style="font-size: 1.5em;">留下你想說的話</p>
                                    <p class="" style="font-size: 1.5em;">讓生命故事美好延傳</p>
                                </div>
                            </div>
                        </div>
                        <button id="q3-btn" class="mt-5 mb-3">next</button>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-5" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 36vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">請告訴我</p>
                                    <p class="" style="font-size: 1.2em;">你想說話的對象</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container mt-3 mb-3">
                        <div class="row justify-content-center">
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" value="Metallic Tones" id="q3a">
                                    <label class="form-check-label q3-btn" for="q3a">- 對象 -</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" value="Mauve" id="q3b">
                                    <label class="form-check-label q3-btn" for="q3b">你都如何稱呼他/她？</label>
                                </div>
                            </div>
                        </div>
                        <button id="q4-btn" class="next-btn mt-5 mb-3">選好了&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;></button>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-6" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 24vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">難得鼓起勇氣</p>
                                    <p class="" style="font-size: 1.2em;">你想對家人說些什麼呢？</p>
                                    <p class="boxed-text" style="font-size: 0.8em;">請選擇至多2句想講的話</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container mt-3 mb-3">
                        <div class="row justify-content-center">
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" value="Earily Morning" id="q4a">
                                    <label class="form-check-label q4-btn" id="q4a_lable" for="q4a">我花太少時間陪你們..</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" value="Morning" id="q4b">
                                    <label class="form-check-label q4-btn" id="q4b_lable" for="q4b">謝謝你為家庭付出的一切...</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" value="Noon" id="q4c">
                                    <label class="form-check-label q4-btn" id="q4c_lable" for="q4c">謝謝你總是無條件支持我...</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" value="Afternoon" id="q4d">
                                    <label class="form-check-label q4-btn" id="q4d_lable" for="q4d">我真的好愛你們...</label>
                                </div>
                            </div>
                        </div>
                        <button id="q5-btn" class="next-btn mt-5 mb-3">下一步&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;></button>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-7" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 24vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">再來...</p>
                                    <p class="" style="font-size: 1.2em;">讓我們增加一些情感濃度</p>
                                    <p class="boxed-text" style="font-size: 0.8em;">請選擇 1 個想表達的情緒</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container mt-3 mb-3">
                        <div class="row justify-content-center">
                            <div class="col-6 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" value="Earily Morning" id="q5a">
                                    <label class="form-check-label q5-btn" id="q5a_lable" for="q4a"><span>真摯</span></label>
                                </div>
                            </div>
                            <div class="col-6 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" value="Morning" id="q5b">
                                    <label class="form-check-label q5-btn" id="q5b_lable" for="q4b"><span>感激</span></label>
                                </div>
                            </div>
                            <div class="col-6 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" value="Noon" id="q5c">
                                    <label class="form-check-label q5-btn" id="q5c_lable" for="q4c"><span>溫暖</span></label>
                                </div>
                            </div>
                            <div class="col-6 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" value="Afternoon" id="q5d">
                                    <label class="form-check-label q5-btn" id="q5d_lable" for="q4d"><span>深情</span></label>
                                </div>
                            </div>
                        </div>
                        <button id="q6-btn" class="next-btn mt-5 mb-3">下一步&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;></button>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-8" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 28vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">想多了解你</p>
                                    <p class="" style="font-size: 1.2em;">讓言語更貼近</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container mt-3 mb-5">
                        <div class="row justify-content-center">
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" value="Metallic Tones" id="q3a">
                                    <label class="form-check-label q3-btn" for="q3a">如何稱呼你</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" value="Mauve" id="q3b">
                                    <label class="form-check-label q3-btn" for="q3b">- 年齡 -</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" value="Mauve" id="q3b">
                                    <label class="form-check-label q3-btn" for="q3b"> - 性別 -</label>
                                </div>
                            </div>
                        </div>
                        
                        <button id="q7-btn" class="next-btn mt-5 mb-3">下一步&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;></button>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-9" class="view hidden">
                    <div class="container-fluid mx-0 px-0">
                        <div class="row" style="height: 60vh;">
                            <div class="title-box mt-5">
                                <div class="" style="margin-top: 76%;">
                                    <img src="img/context_generating.svg" style="width: 100%;" alt="">
                                    <p class="mb-1 mt-5" style="font-size: 1em;">情感醞釀中，請稍候...</p>
                                </div>
                            </div>
                        </div>
                        <button id="q8-btn" class="mt-5 mb-3">next</button>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-10" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 86vh;">
                            <div class="title-box message-box">
                                <div class="text_content">
                                    <p class="conversation_content mb-5">你願意親身錄下聲音</p>
                                    <p class="conversation_content mb-1">讓我為你的聲音採樣?</p>
                                </div>
                            </div>
                            <img class="" id="mic-image-3" src="img/mic.svg" alt="">
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <button id="" class="next-btn mt-3" style="width: 80%;">我同意</button>
                            </div>
                            <div class="col-6">
                                <button id="q9-btn" class="next-btn mt-3" style="width: 80%;">AI幫幫我</button>
                            </div>
                        </div>
                    </div>
                    <div class="ball-3"></div>
                </div>
                <div id="view-11" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 24vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-4 mt-4" style="font-size: 1.4em;">[ 愛的宣言 ]</p>
                                    <p class="boxed-text" style="font-size: 0.8em; width: 80%;">請按下按鈕錄音，開始念誦以下文字</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-12 record_message_box">
                                <p class="mb-1">這個匆忙的時代，我們經常錯失</p>
                                <p class="mb-5">表達內心情感的機會。</p>
                                
                                <p class="mb-1">現在，我願透過留下聲紋，</p>
                                <p class="mb-1">讓愛超越時空的限制，</p>
                                <p class="mb-5">賦予所愛之人力量和安慰。</p>

                                <p class="mb-1">我承諾繼續分享愛，留存愛，</p>
                                <p class="mb-1">讓這份真摯的情感，</p>
                                <p class="mb-1">以另一種方式</p>
                                <p class="mb-5">在時間的消逝中永存。</p>
                            </div>
                        </div>
                        <button id="q10-btn" class="record_icon"><img src="img/Record_Icon.svg" alt=""></button>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-12" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 24vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-4 mt-4" style="font-size: 1.4em;">[ 愛的宣言 ]</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-12 record_message_box">
                                <p class="mb-1">這個匆忙的時代，我們經常錯失</p>
                                <p class="mb-5">表達內心情感的機會。</p>
                                
                                <p class="mb-1">現在，我願透過留下聲紋，</p>
                                <p class="mb-1">讓愛超越時空的限制，</p>
                                <p class="mb-5">賦予所愛之人力量和安慰。</p>

                                <p class="mb-1">我承諾繼續分享愛，留存愛，</p>
                                <p class="mb-1">讓這份真摯的情感，</p>
                                <p class="mb-1">以另一種方式</p>
                                <p class="mb-5">在時間的消逝中永存。</p>
                            </div>
                        </div>
                        <div class="row mt-5">
                            <div class="col-6">
                                <button id="" class="next-btn mt-3" style="width: 80%;">重新採樣</button>
                            </div>
                            <div class="col-6">
                                <button id="q11-btn" class="next-btn mt-3" style="width: 80%;">完成</button>
                            </div>
                        </div>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                </div>
                <div id="view-13" class="view hidden">
                    <div class="container-fluid mx-0 px-0">
                        <div class="row" style="height: 60vh;">
                            <div class="title-box mt-5">
                                <div class="" style="margin-top: 40%; position: relative;">
                                    <img src="img/sound_wave_circle.svg" style="width: 90%; position: absolute; top: 0; left: 5%;" alt="">
                                    <p class="" style="font-size: 1em;   position: absolute;
                                    left: 0;
                                    right: 0;
                                    top: 170px;
                                    bottom: 0;
                                    margin: auto;">愛在發聲中...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ball-1"></div>
                    <div class="ball-2"></div>
                    <footer class="fixed-bottom">
                        <button id="q12-btn" class="mt-5 mb-3">next</button>
                    </footer>
                </div>
                <div id="view-14" class="view hidden">
                    <div class="container-fluid">
                        <div class="row" style="height: 24vh;">
                            <div class="title-box mt-5">
                                <div class="">
                                    <p class="mb-1 mt-5" style="font-size: 1.2em;">讓我們來聽聽</p>
                                    <p class="" style="font-size: 1.2em;">屬於你 愛的發聲</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container-fluid mx-0 px-0">
                        <div class="row" style="height: 48vh;">
                            <div class="title-box message-box" style="margin-top: 0;">
                                <img src="img/result_sound_wave_animation.svg" alt="" style="width: 100%; height: auto; position: absolute; top: 50%; transform: translateY(-50%);">
                                <img src="img/result_play_icon.svg" alt="" style="width: 20%; height: auto; position: absolute; top: 50%; transform: translateY(-50%);">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <button id="" class="next-btn mt-3 py-1" style="width: 100%; height: 100%;">邀請朋友<br>一起玩</button>
                            </div>
                            <div class="col-6">
                                <button id="" class="next-btn mt-3 py-1" style="width: 100%; height: 100%;">分享給<br>他/她</button>
                            </div>
                            <div class="col-12 mt-3">
                                <button id="q13-btn" class=" mt-3 invisible_btn"><img src="img/result_watch_more.svg" style="width: 12%; height: auto;" alt=""></button>
                            </div>
                        </div>
                    </div>
                    <div class="ball-1"></div>
                </div>
                <div id="view-15" class="view hidden">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12 mt-3">
                                <button id="q14-btn" class=" mt-3 invisible_btn"><img src="img/result_return.svg" style="width: 12%; height: auto;" alt=""></button>
                            </div>
                        </div>
                        <div class="row" style="height: 16vh;">
                            <div class="title-box">
                                <div class="">
                                    <p class="mt-3 mb-0" style="font-size: 1.4em;"><span style="font-size: 1.6em; color: #F68A26;">愛</span>的心聲已傳達</p>
                                    <p class="mt-1" style="font-size: 1em;">還有另外一種方式，「再現生機」</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-12 record_message_box">
                                <img src="img/soundcard.svg" class="mb-3" style="width: 100%;" alt="">
                                <p class="mb-1" style="color: #3B3B3B;">錄下同意器官捐贈的任何心聲</p>
                                <p class="mb-1" style="color: #3B3B3B;">讓你的愛和理想</p>
                                <p class="mb-3" style="color: #3B3B3B;">能被在乎的人聽見、留存記憶中</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <button id="" class="more-btn mt-3 py-2">了解器捐聲紋卡</button>
                            </div>
                            <div class="col-12">
                                <button id="" class="more-btn mt-3 py-2">重新 為愛發聲</button>
                            </div>
                        </div>
                    </div>
                    <footer class="fixed-bottom">
                        <img src="img/activity.svg" alt="">
                    </footer>
                    <div class="ball-3"></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const initView = document.getElementById('view-1')
        initView.classList.remove('hidden');

        const imageUrl = 'https://www.nb9060futureplan.com/';
        const shareText = encodeURIComponent("Check out this awesome image!");
        const shareUrl = encodeURIComponent(window.location.href);

        const downloadSHare = document.querySelector(".download-share");

        const startBtn = document.getElementById('start-btn');
        const startBuildingBtn = document.getElementById('start-building-btn');

        const q1Btn = document.getElementById('q1-btn');
        const q2Btn = document.getElementById('q2-btn');
        const q3Btn = document.getElementById('q3-btn');
        const q4Btn = document.getElementById('q4-btn');
        const q5Btn = document.getElementById('q5-btn');
        const q6Btn = document.getElementById('q6-btn');
        const q7Btn = document.getElementById('q7-btn');
        const q8Btn = document.getElementById('q8-btn');
        const q9Btn = document.getElementById('q9-btn');
        const q10Btn = document.getElementById('q10-btn');
        const q11Btn = document.getElementById('q11-btn');
        const q12Btn = document.getElementById('q12-btn');
        const q13Btn = document.getElementById('q13-btn');
        const q14Btn = document.getElementById('q14-btn');

        const views = document.getElementsByClassName('view');
        const result = document.getElementById('result');

        const btnHome = document.getElementById('btn_home');

        // const disclaimerClose = document.getElementById('disclaimer_close');
        // const disclaimerLink = document.getElementById('disclaimer_link');

        const nbLogoR = document.getElementById('nb-logo-r');

        var q1Btns = document.getElementsByClassName("q1-btn");
        var q2Btns = document.getElementsByClassName("q2-btn");
        var q3Btns = document.getElementsByClassName("q3-btn");
        var q4Btns = document.getElementsByClassName("q4-btn");

        const getData = async (url) => {
            try {
                const response = await fetch(url);

                if (!response.ok) {
                throw new Error(`HTTP error: ${response.status}`);
                }

                const jsonResponse = await response.json();
                return jsonResponse;
            } catch (error) {
                console.error('Error sending GET request:', error);
            }
        };

        const inputs = document.getElementsByClassName('form-check-input');

        startBtn.addEventListener('click', () => {
            navigateToView(1);
        });

        q1Btn.addEventListener('click', () => {
            navigateToView(2);
        });
        q2Btn.addEventListener('click', () => {
            navigateToView(3);
        });
        q3Btn.addEventListener('click', () => {
            navigateToView(4);
        });
        q4Btn.addEventListener('click', () => {
            navigateToView(5);
        });
        q5Btn.addEventListener('click', () => {
            navigateToView(6);
        });
        q6Btn.addEventListener('click', () => {
            navigateToView(7);
        });
        q7Btn.addEventListener('click', () => {
            navigateToView(8);
        });
        q8Btn.addEventListener('click', () => {
            navigateToView(9);
        });
        q9Btn.addEventListener('click', () => {
            navigateToView(10);
        });
        q10Btn.addEventListener('click', () => {
            navigateToView(11);
        });
        q11Btn.addEventListener('click', () => {
            navigateToView(12);
        });
        q12Btn.addEventListener('click', () => {
            navigateToView(13);
        });
        q13Btn.addEventListener('click', () => {
            navigateToView(14);
        });
        q14Btn.addEventListener('click', () => {
            navigateToView(13);
        });

        // disclaimerClose.addEventListener('click', () => {
        //     navigateToView(0);
        // });
        // disclaimerLink.addEventListener('click', () => {
        //     navigateToView(10);
        // });

        // Add a click event to each element
		for (var i = 0; i < q1Btns.length; i++) {q1Btns[i].addEventListener('click', () => {navigateToView(3);});}
        for (var i = 0; i < q2Btns.length; i++) {q2Btns[i].addEventListener('click', () => {navigateToView(4);});}
        for (var i = 0; i < q3Btns.length; i++) {q3Btns[i].addEventListener('click', () => {navigateToView(5);});}
        for (var i = 0; i < q4Btns.length; i++) {
            q4Btns[i].addEventListener('click', () => {
                navigateToView(6); // Show the wait view
                setTimeout(() => {
                    handleResults();
                }, 2000),
                setTimeout(() => {
                    if (window.matchMedia('(min-width: 768px)').matches) {
                        
                    } else {
                        document.getElementById('navbar').classList.add('hidden');
                        swipeBackground.style.backgroundImage = 'url('+resultImage.src+')';
                        navigateToView(11);
                        setTimeout(() => {
                            swipeBackground.style.backgroundPosition = '100% center';
                        }, 100);
                        // setTimeout(() => {
                        //     // swipeBackground.style.backgroundPosition = '100% center';
                        //     // document.body.style.backgroundImage = originalBackgroundImage;
                        // }, 1700);
                    }
                }, 16500);
                setTimeout(() => {
                    displayResults();
                }, 18500);
                setTimeout(() => {
                    navigateToView(7); // Show the result view after 5 seconds
                    document.getElementById('navbar').classList.remove('hidden');
                    swipeBackground.style.backgroundPosition = '0% center';
                    nbLogoR.classList.remove('hidden');
                }, 19000);
            });
        }

        function navigateToView(viewIndex) {
            for (let i = 0; i < views.length; i++) {
                if (i === viewIndex) {
                    views[i].classList.remove('hidden');
                    // views[i].style.opacity = '1';
                } else {
                    views[i].classList.add('hidden');
                    // views[i].style.opacity = '0';
                }
            }
        }
        async function handleResults() {
            console.log('handleResults')
            var q1 = document.querySelector('input[name="q1"]:checked').value;
            var q2 = document.querySelector('input[name="q2"]:checked').value;
            var q3 = document.querySelector('input[name="q3"]:checked').value;
            var q4 = document.querySelector('input[name="q4"]:checked').value;

            // Send a GET request with the answers as query parameters
            const url = `https://chatgptdemo.williamhsu.com.tw/prompts/new_balance/run/?input1=${q1}&input2=${q2}&input3=${q3}&input4=${q4}`;
            
            const responseData = await getData(url);

            if (responseData) {
                const resultImage = document.getElementById('resultImage');
                // Set the src attribute of the img element
                console.log(responseData)
                if (responseData.url === "") {
                    resultImage.src = "data:image/png;base64," + responseData.image;
                } else {
                    console.log('right place')
                    fetch(responseData.url)
                        .then(response => response.blob())
                        .then(blob => {
                            // Create a FileReader object
                            const reader = new FileReader();

                            // Convert the blob to base64 string
                            reader.readAsDataURL(blob);
                            reader.onloadend = () => {
                                const base64String = reader.result;

                                // Assign the base64 string to the img tag
                                resultImage.src = base64String;
                            };
                        })
                        .catch(error => {
                            console.error(error);
                        });
                    // resultImage.src = responseData.url;
                }
                // document.getElementById("image-to-share").src = responseData.url;
            }
        }
    </script>
</body>
</html>
